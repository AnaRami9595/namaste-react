We will learn about routering today


ğŸŸ  useEffectğŸ’¥ HOOKğŸª: diving deep


        INTERVIEW QUESTIONğŸ™ï¸: When is useEffectğŸ’¥ called?
        is called after every time my ComponentğŸ§© rendersğŸ–Œï¸ 

        However the Dependencyâ›“ï¸ array changes the behavior
        of the render.
        If the Dependencyâ›“ï¸ ArrayğŸ’ is empty, useEffectğŸ’¥
        is called only during the initial render and only ONCE.

        ğŸ¤”and if we put something inside the Dependencyâ›“ï¸ ArrayğŸ’?
        Then useEffectğŸ’¥ is called, everytime the Dependencyâ›“ï¸
        is updated


ğŸŸ  useStateâ˜ï¸ HOOKğŸª: diving deep --------------

ğŸ”¹Best Practices:

Never set your useStateâ˜ï¸ variables outside the ComponentğŸ§©
that is using them, be carefulâ—
It is used to create local variables inside the components

Always try to call the useStateâ˜ï¸ variables in your top

Never create your useStateâ˜ï¸ HOOKğŸª inside a conditional 
statements. That could create inconsistencies in the future
Use REACTâš›ï¸ as it was intended. 

Never create a stateâ˜ï¸ variable inside a for loop âŒError

The State variables are designed to be declared in their 
ComponentğŸ§©and be placed at the top of the page!

ğŸŸ  RoutesğŸ›¤ï¸ --------------

In order to use routes we will need a REACTâš›ï¸ Dependency.
An NPM design library


            ğŸ–¥ï¸npm install react-router-dom

ğŸ”·Let's create an About Page, using router


Let's go to our root ComponentğŸ§© which will be our
App.js Here we will create our RoutingğŸ›¤ï¸ configuration.

        //at App.js
        ğŸ–¥ï¸import { createBrowserRouter } from "react-router-dom";
        //this â˜ï¸ will create a configuration for us

        //creating our routerğŸ‘‡
        const appRouter = createBrowserRouter()

    ğŸ¤”What is the configuration:
    is the information that something will happen on
    a specific route/path.

    createBrowserRouter() takes a list of pathsğŸŒŒ.
    Path is nothing but an object that contain 2 things,
    the path and the ComponentğŸ§© that will contain.
    Our configuration will look like this:

            ğŸ–¥ï¸const appRouter = createBrowserRouter([
                {
                    path: "/",
                    element: <AppLayout />
                },

                {
                    path: "/about",
                    element: <About />
                }

                ]);

        //so it;s basically an array of objects,
        each containing  a path and an element.

    
    ğŸ”¹Let us now create our About.js component and then  
    we will need to provide this configuration to 
    RENDERğŸ–Œï¸. How do we do that? ğŸ¤”

    We will need to import another ComponentğŸ§© from
    react-router-dom

            ğŸ–¥ï¸import { 
                createBrowserRouter, 
        ğŸ‘‰      RouterProvider } from 
                "react-router-dom";


    ğŸ”¹Earlier we were rendering our app directly with 

            ğŸ–¥ï¸const root = ReactDOM.createRoot(
                document.getElementById("root"))

            root.render(<AppLayout/>)

    ğŸ”¹Now, instead of this, we will provide it using 
    our router configuration:

            ğŸ–¥ï¸const root = ReactDOM.createRoot(
                document.getElementById("root"))

            root.render(<RouterProvider router={ğŸ‘ˆ
                appRouter}/>)

    ğŸ”¹This will make our RouterğŸ›¤ï¸ work and now we can 
    go to our About Section with the path 
    "http://localhost:1234/about"


    ğŸ’¡The recommended router for all REACTâš›ï¸ Router web
    projects is "createBrowserRouter". So please use it

ğŸ”·Let's create another ComponentğŸ§©, a "Contact" page 
And an âŒError page in case out user goes to a route
that doesn't exist:

For that we can add an "errorElement" to our router
configuration.
We will also create another ComponentğŸ§© inside our
srcğŸ“ folder and import it to App.js to use it 
like a ComponentğŸ§©

Our router will look like this:

            ğŸ–¥ï¸const appRouter = createBrowserRouter([
                {
                    path: "/",
                    element: <AppLayout />,
                    errorElement: <Error/>ğŸ‘ˆ
                },

                {
                    path: "/about",
                    element: <About />
                },

                {
                    path: "/contact",
                    element: <Contact />
                },

            ]);


    ğŸ”¹react-router-dom can also give us an additional
    feature called useRouteErrorâŒ, which is a HOOKğŸª

    ğŸ’¡Whenever you see a function that starts with 
    a "use" is a HOOKğŸª. This is a convention used in
    the industry

    Using the useRouteErrorâŒ will give us more 
    information about the âŒError and show it to
    the user. We implement it like this inside 
    our ComponentğŸ§© Error.js: 

            ğŸ–¥ï¸import { 
                useRouteError 
                } from "react-router-dom";

                const Error = () => {

                    const arr = useRouteError();ğŸ‘ˆ
                    console.log(arr);ğŸ‘ˆ
                    return (
                        <div className="error">
                            <h1>Oops!</h1>
                            <h2>Something went wrong!!</h2>
                        </div>
                    );
                }

            //this prints in the console"
            "o routes matched location" when we try to 
            access a non-existent path. And a RESPONSEğŸ—¨ï¸ 
            
    We also get an âŒError RESPONSEğŸ—¨ï¸, wich is an object with 
    information about the error that just happened :

            ğŸ–¥ï¸ErrorResponse
                data : "Error: No route matches URL \"/oosifjoiajf\""
                error : Error: No route matches URL "/oosifjoiajf" 
                internal : true
                status : 404
                statusText : "Not Found"
                [[Prototype]]: Object
                etc.
                
        //we can access this object properties to display information
        to our user.â¬‡ï¸
        
            ğŸ–¥ï¸const Error = () => {

            const arr = useRouteError();
            console.log(arr);
            return (
                <div className="error">
                    <h3>{arr.status} {arr.statusText}</h3>ğŸ‘ˆ
                </div>
                );
            }                i

        //This will display in the browser "404 Not Found"



ğŸŸ 2 ChildrenğŸš¸ RoutesğŸ›¤ï¸--------------

We have created some RoutesğŸ›¤ï¸ but when we access them, our
nav bar disappears, to make our website better it whould be 
present in all our pages, right? instead of just disappearing
completely and we needing to write in the direction bar to 
access another ComponentğŸ§©,


In order to do that, our ComponentsğŸ§© like Contactc and
About, need to be placed as ChildrenğŸš¸ of our rootğŸŒ±
ComponentğŸ§©. Once again we will use our RouterğŸ›¤ï¸
to do that, using the property "children"ğŸš¸ to add the
children components as a list inside our rootğŸŒ± component.


                ğŸ–¥ï¸const appRouter = createBrowserRouter([
                {
                    path: "/",
                    element: <AppLayout />,
                    children: [ğŸ‘ˆ

                        {
                            path: "/",
                            element: <Body /> ğŸ‘ˆ
                        },

                        {
                            path: "/about",
                            element: <About />
                        },

                        {
                            path: "/contact",
                            element: <Contact />
                        },
                    ],
                    errorElement: <Error />
                 }

                ]);

            //ğŸ‘‰Adding the Body ComponentğŸ§© to our children
            list in order to use it later.


    ğŸ”¹Now we have our RoutesğŸ›¤ï¸ but how do we display them
      in our layout? In order to be displayed inside the
      Body ComponentsğŸ§© they will need to fulfill certain 
      conditions: 

                ğŸ–¥ï¸const AppLayout = () => {
                    return (
                        <div className="app">
                            <Header />

                            {/*  If path === "/about: */}â—€ï¸
                                <About/>ğŸ‘ˆ
                            {/*  If path === "/contact: */}â—€ï¸
                                <Contact/>ğŸ‘ˆ
                            {/*  If path === "/": */}â—€ï¸
                            <Body />ğŸ‘ˆ
                      </div>
                    );
                }

    ğŸ¤”But how do we get this to work?

    ğŸ”¹We will use another property from react-router-dom, the 
    Outlet ComponentğŸ§©. First we'll import it inside App.js


                ğŸ–¥ï¸import { 
                    createBrowserRouter, 
                    RouterProvider, 
                 ğŸ‘‰ Outlet 
                    } from "react-router-dom";


    ğŸ”¹And then we place it inside our AppLayout ComponentğŸ§©:

                    ğŸ–¥ï¸const AppLayout = () => {
                        return (
                            <div className="app">
                                <Header />
                                <Outlet />ğŸ‘ˆ
                            </div>
                        );
                    }

            //ğŸ’¡Whenever there is a change in the pathğŸŒŒ
            this outlet will be filled with one of the children
            of `appRouter` according to the pathğŸŒŒ of the page.

            //The header will remain. REACTâš›ï¸ Will replace
            the contact in our page with the new jsx Code 


    ğŸ”¹Let's make our "contact", "about", ect buttons functional
    inside our navbar

    We will NOT be using anchor tags <a>âŒâŒâŒ
    because the whole page will be refreshed.
    We don't want to refresh, only go to a new path, luckily
    REACTâš›ï¸ can do that.


    ğŸ”¹"Link" from react-router-dom is a ComponentğŸ§© that will allow
    us to do just that. First we import it:


                ğŸ–¥ï¸import { Link } from "react-router-dom";


    ğŸ”¹And then use them to link to our path, here is
    the syntax:

               ğŸ–¥ï¸const Header = () =>{
                <ul>
                ğŸ‘‰<li><Link to="/">Home</Link></li>
                ğŸ‘‰<li><Link to="/about">About</Link></li>
                ğŸ‘‰<li><Link to="/contact">Contact</Link></li>
                   <li>Cart</li>
                </ul>
               }

ğŸŸ  Routing part II ğŸ›¤ï¸ --------------

There's 2 types of RoutingğŸ›¤ï¸in web apps.

    - Client Side RoutingğŸ›¤ï¸
        The page rendersğŸ–Œï¸ inside user's computer
        it doesn't do any network calls, only to 
        get the data from the API.
        This is the one we are using. 

    - Server Side RoutingğŸ›¤ï¸
        The page rendered is coming from server

ğŸŸ  Let's make Routing actually work ğŸ›¤ï¸ --------------

We will make different pages to different restaurants
Are you excited???? That would show us how dynamic
RoutingğŸ›¤ï¸ works!

    ğŸ”¹Let's create a Restaurant Menu ComponentğŸ§©

               ğŸ–¥ï¸const RestaurantMenu = () => {
                    <div className="menu">
                        <h1>Name of the Restaurant</h1>
                        <h2>Menu</h2>
                        <ul>
                            <li>Food1</li>
                            <li>Food2</li>
                        </ul>
                    </div>
                }

                export default RestaurantMenu;


    ğŸ”¹And now add its respective path to the  children routes:


               ğŸ–¥ï¸const appRouter = createBrowserRouter([
                {
                    path: "/",
                    element: <AppLayout />,
                    children: [
                        {
                            path: "/",
                            element: <Body />
                        },

                        {
                            path: "/about",
                            element: <About />
                        },

                        {
                            path: "/contact",
                            element: <Contact />
                        },

                        ğŸ‘‰{
                           path: "/restaurants/:resId",ğŸ‘ˆThis will be dynamic
                           element: <RestaurantMenu />
                        },
                    ],
                    errorElement: <Error />
                    }

                ]);

                //we will make a path that changes depending on the ID of 
                the Restaurant, it will display a menu for each ID

ğŸŸ  Creating a dynamic Restaurant ComponentğŸ§© --------------

    ğŸ”¹Inside our Restaurant Menu ComponentğŸ§© we are going to use
     a menu from a restaurant using their ID in order to get the menu
     Items. 

        1ï¸âƒ£First we will make a  stateâ˜ï¸ variable that will contain
        the restaurant information: 

            ğŸ–¥ï¸const [resInfo, setResInfo] = useState(null);

        2ï¸âƒ£Then we will use our useEffectğŸ’¥ HOOKğŸª So we can
        fetch the data only when the page is rendered for the 1st 
        time. This will only work during the initial rendering
        since we didn't add any Dependencyâ›“ï¸ inside our Dependencyâ›“ï¸
        ArrayğŸ’.

            ğŸ–¥ï¸useEffect(() => { fetchMenu() }, []);

        3ï¸âƒ£Let's fetch the data from the restaurant using fetch()ğŸ•
        and setResInfo to the json RESPONSEğŸ—¨ï¸. 


            ğŸ–¥ï¸const fetchMenu = async () => {
            const data = await fetch("http://localhost:3000/hotel/145611"
            );
            const json = await data.json();
            setResInfo(json)
            }

        4ï¸âƒ£Now let's:

            ğŸ”¹  ğŸ–¥ï¸if (!resInfo) return <Shimmer />

                //Create a conditional statemment to display
                //a shimmer in case data doesn't come up


            ğŸ”¹  ğŸ–¥ï¸ const { name, cuisines,  cost } = resInfo?.info;
                    const { foodOptions } = resInfo

                //Destructure some variables inside resInfo
                //for convenience sake


        5ï¸âƒ£Now let's use the Destructured variables to display
        in our ComponentsğŸ§©, and map the items in the menu
        in order to show them as elements inside the <ul>

              ğŸ–¥ï¸return (
                <div className="menu">
                    <h1>{name}</h1>ğŸ‘ˆ
                    <h3>{cuisines.join(", ")} - {cost} </h3>
                    <h2>Menu</h2>
                 <ul>{
                    foodOptions.map((item) => ğŸ‘ˆ
                    <li 
                        key={item.card.info.id}>
                        {item.card.info.name} - â‚¹{item.card.info.price}
                    </li>)
                    }
                </ul>
                </div>)

ğŸŸ  useParamsğŸ–ï¸ HOOKğŸª --------------

This is great and all but how we can display our items
depending on the id of the restaurant?

We will use another super power from REACTâš›ï¸ RouterğŸ›¤ï¸ CALLED 
useParamsğŸ–ï¸. First we will import it inside our RestaurantMenu
ComponentğŸ§©:


              ğŸ–¥ï¸ import { useParams } from "react-router-dom";

    ğŸ”¹useParams() is a function that returns an object that includes
    the parameters that were used in our pathsğŸŒŒ before. In this case
    we will use the resId in the createBrowserRouter() function inside
    our App.js ComponentsğŸ§©

              ğŸ–¥ï¸    const { resId } = useParams()
                    console.log(resId)
                    //logs the resId of the page we have


    ğŸ”¹Instead of hardcoding the link for the API we store it inside
    a MENU_API variable and concatenate it to the resId variable.

                ğŸ–¥ï¸  const fetchMenu = async () => {
                        const data = await fetch(MENU_API + resId);
                        const json = await data.json();
                    setResInfo(json)
                    }


    ğŸ”¹ Now that we are able to see the menu for each resId that is
    displayed in our browser, let's apply a <Link> ComponentsğŸ§©
    for each RestaurantCard that is displayed in our Home page.

                ğŸ–¥ï¸ <div className="res-container">
                {filteredRestaurants.map(restaurant => (
                    ğŸ‘‰<Link key={restaurant.info.id} to={
                       ğŸ‘‰ "/restaurants/" + restaurant.info.id}>
                       ğŸ‘‰ <RestaurantCard
                        ğŸ‘‰  resData={restaurant} />
                    </Link>
                ))}
                 </div>

              //ğŸ’¡KEY SHOULD BE INSIDE THE PARENT
              //JSX ELEMENT ALWAYS, so we changed the key attribute
              //inside the <Link> Element.